(function(n){let i=".u-sidebar",e=n(".js-sidebar-invoker"),t=n("body"),h=Boolean(e.data("is-close-all-except-this")),o=window.innerWidth,r=[],s=[];const u=()=>{if(o=window.innerWidth,n(i).addClass("toggled"),r.length>0&&o>=768){let u=r.toString();n(u).slideUp(400,function(){n(i+".toggled").addClass("action mini");t.addClass("side-nav-on-action");n(u).parent().removeClass("u-sidebar-nav--opened")})}else n(i+".toggled").addClass("action mini"),t.addClass("side-nav-on-action")},f=()=>{let u=window.innerWidth;n(i).removeClass("mini action toggled");t.removeClass("side-nav-on-action");r.length>0&&u>=768&&setTimeout(function(){n(r.toString()).parent().addClass("u-sidebar-nav--opened");n("body:not(.sidebar-tablet-closed) "+r.toString()).slideDown(400)},300)},c=t=>{for(const i of s)i!==t&&n(i).slideUp(300).parent().removeClass("u-sidebar-nav--opened")};n(window).on("load",function(){n(".u-sidebar-nav--opened").length&&n(".u-sidebar-nav--opened > .u-sidebar-nav-menu__link[data-target]").each(function(){r.push(n(this).data("target"))});n(".u-sidebar-nav-menu__link[data-target]").each(function(){s.push(n(this).data("target"))});e.on("click",function(r){r.preventDefault();t.removeClass("sidebar-tablet-closed sidebar-mobile-closed");n(i).hasClass("toggled")?f():u()});n(".u-sidebar-nav-menu__link[data-target]").on("click",function(i){i.preventDefault();let u=n(this).data("target");h?(r=[],n('.u-sidebar-nav-menu--top-level ul:not("'+u+'")').slideUp(400).parent().removeClass("u-sidebar-nav--opened"),n(u).slideToggle(400).parent().toggleClass("u-sidebar-nav--opened"),n(this).parent().hasClass("u-sidebar-nav--opened")&&r.push(u),t.hasClass("tablet-mode")&&t.toggleClass("has-tablet-opened-items")):(r.push(u),n(u).slideToggle(400).parent().toggleClass("u-sidebar-nav--opened"),t.hasClass("tablet-mode")&&t.toggleClass("has-tablet-opened-items"))});n(window).on("resize",function(){let r=window.innerWidth;if(r<768?t.removeClass("tablet-mode desktop-mode side-nav-on-action sidebar-tablet-closed").addClass("mobile-mode sidebar-mobile-closed"):r>=768&&r<=992?t.removeClass("mobile-mode sidebar-mobile-closed desktop-mode side-nav-on-action").addClass("tablet-mode sidebar-tablet-closed"):t.removeClass("tablet-mode mobile-mode sidebar-mobile-closed sidebar-tablet-closed has-tablet-opened-items").addClass("desktop-mode"),r<768)n(i+".toggled").removeClass("mini");else if(r>=768&&r<=992)n(i+".toggled").addClass("mini");else n(i+".toggled").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n(i+".toggled").addClass("mini")});r>=768&&r<=992?(n(i).addClass("tablet"),t.hasClass("has-tablet-opened-items")||u()):(n(i).removeClass("tablet"),(!t.hasClass("side-nav-on-action")||t.hasClass("side-nav-on-action desktop-mode"))&&f())}).resize()});n.extend({openEffect:f,closeEffect:u,closeMenuItems:c})})(jQuery);